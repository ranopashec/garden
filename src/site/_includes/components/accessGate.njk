{% if access == "private" %}
  <div class="access-gate" data-article-path="{{ page.url }}">
    <div class="access-checking">
      <div class="access-spinner"></div>
      <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞...</p>
    </div>
    <div class="access-denied" style="display: none;">
      <div class="access-denied-icon">üîí</div>
      <h2>–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω</h2>
      <p>–≠—Ç–∞ —Å—Ç–∞—Ç—å—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º Telegram</p>
    </div>
    <div class="article-content" style="display: none;">
      {{ content | hideDataview | link | safe }}
    </div>
  </div>
{% else %}
  {{ content | hideDataview | link | safe }}
{% endif %}

<script>
(function() {
  const accessGate = document.querySelector('.access-gate');
  if (!accessGate) return;
  
  const checkingEl = accessGate.querySelector('.access-checking');
  const deniedEl = accessGate.querySelector('.access-denied');
  const contentEl = accessGate.querySelector('.article-content');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram WebApp
  if (window.Telegram?.WebApp && window.Telegram.WebApp.initData) {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –≤ Telegram - —Ä–∞–∑—Ä–µ—à–∞–µ–º –¥–æ—Å—Ç—É–ø
    checkingEl.style.display = 'none';
    deniedEl.style.display = 'none';
    contentEl.style.display = 'block';
  } else {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –∑–∞–ø—Ä–µ—â–∞–µ–º –¥–æ—Å—Ç—É–ø
    checkingEl.style.display = 'none';
    deniedEl.style.display = 'block';
    contentEl.style.display = 'none';
  }
})();
</script>

